---
title: "Vector Monitoring"
slug: "vector-monitoring"
hidden: false
createdAt: "2022-08-10T18:47:06.563Z"
updatedAt: "2022-08-18T19:40:35.192Z"
---
Vector Monitoring for NLP and Unstructured Data
===============================================

While Fiddler calculates data drift at deployment time for numerical features that are stored in columns of the baseline dataset, many modern machine learning systems use input features that cannot be represented as a single number (e.g., text or image data). Such complex features are usually rather represented by high-dimensional vectors which are obtained by applying a vectorization method (e.g., text embeddings generated by NLP models). Furthermore, Fiddler users might be interested in monitoring a group of univariate features together and detect data drift in multi-dimensional feature spaces.

In order to address the above needs, Fiddler provides vector monitoring capability which involves enabling users to define custom (multi-dimensional) features, and applying a novel clustering-based method to monitor data drift in high-dimensional spaces.

Intuitively, Fiddler monitors multi-dimensional data by detecting regions of high density (clusters) in data spaces, and tracking how the relative density of such regions might change at production time. Fiddler automatically detects the clusters of data points to be tracked for drift using a default set-up. Moreover, users have the flexibility of modifying the clustering algorithm by manually setting the number of clusters used for monitoring each custom feature. A larger number of clusters corresponds to a higher sensitivity to data drift.

Defining Custom Features
------------------------

Users can use the Fiddler client to define one or more custom features. In the following we show examples of how a custom feature can be created using the Fiddler Python client.

Each custom feature is specified by a group of dataset columns that need to be monitored together as a vector.  Furthermore, a name is assigned to each custom feature using the **custom_name** argument. Each custom feature appears in the monitoring tab in Fiddler UI with this assigned name. Finally, the default clustering setup can be modified by passing the number of cluster centrioids to the **n_clusters** artgument. 

```python pyth
import fiddler as fdl
CF1 = fdl.CustomFeature.from_columns(['f1','f2','f3'], custom_name = 'vector1')
CF2 = fdl.CustomFeature.from_columns(['f1','f2','f3'], n_clusters=5, custom_name = 'vector2')
```

Passing Custom Features List to Model Info
------------------------------------------

The next step after defining custom features is to send the custom features to Fiddler for monitoring. This step can be done by passing a list of custom features to the  **custom_features** argument of model_info object. Once a list of custom features are passed to Fiddler, a clustering-based data drift detection algorithm will be applied to each custom feature and the corresponding drift value will be calculated for published events at each selected time period.

```python
model_info = fdl.ModelInfo.from_dataset_info(
    dataset_info=dataset_info,
    dataset_id = DATASET_ID,
    features = data_cols,
    target='target',
    outputs='predicted_score',
    custom_features = [CF1,CF2]
)
```

> ðŸ“˜ Quick Start for NLP Monitoring
> 
> Check out our [Quick Start guide for NLP monitoring](https://docs.fiddler.ai/docs/simple-nlp-monitoring-quick-start) for a fully functional notebook example.